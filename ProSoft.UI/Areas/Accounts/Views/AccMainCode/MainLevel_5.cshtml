@model List<AccMainCodeDTO>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "_LayoutAccounting";
}
@inject IViewLocalizer localizer

<div class="container pt-2">
    <div class="d-flex justify-content-between align-items-center mt-4 ">
        <h1 class="header">@ViewBag.main.MainName </h1>

        <a asp-controller="AccMainCode" asp-action="AddMainLevel_5" asp-route-ID="@ViewBag.main.MainCode" class="btn btn-sm btn-primary fs-6" style="width:150px">
            @localizer["Add Main Account"]
        </a>

        @*<a onclick="goTo('Add_LabReports')" class="btn btn-sm btn-primary" style="width:150px">
        ADD
        </a> *@

    </div>
    <table id="myTable" class="table table-bordered table-hover" style="width:100%">
        <thead class="table-dark">
            <tr class="align-middle">
                <th>
                    @localizer["Code"]
                </th>
                <th>
                    @localizer["Account Name"]
                </th>
                <th>
                    @localizer["Nature of Account"]
                </th>
                <th>
                    @localizer["Nature of Account"]
                </th>
                <th>
                    @localizer["General Teacher"]
                </th>
                <th>
                    @localizer["Last Level"]
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var analysis in Model)
            {
                <tr class="align-middle">
                    <td>
                        @analysis.MainCode
                    </td>
                    <td>
                        @analysis.MainName
                    </td>
                    <td>
                        @if (analysis.BalanceFlag == "B")
                        {
                            @localizer["Budget"]
                        }
                        else if (analysis.BalanceFlag == "P")
                        {
                            @localizer["Profit and Loss"]
                        }
                        else if (analysis.BalanceFlag == "N")
                        {
                            @localizer["Without"]
                        }
                    </td>
                    <td>
                        @if (analysis.MainSubType == "mn")
                        {
                            @localizer["Main Balance"]
                        }
                        else if (analysis.MainSubType == "sb")
                        {
                            @localizer["Sub Balance"]
                        }
                        else if (analysis.MainSubType == "N")
                        {
                            @localizer["Without"]
                        }
                    </td>
                    <td>
                        @if (analysis.OstazType == "mn")
                        {
                            @localizer["Main Balance"]
                        }
                        else if (analysis.OstazType == "sb")
                        {
                            @localizer["Sub Balance"]
                        }
                        else if (analysis.OstazType == "tot")
                        {
                            @localizer["The Sum"]
                        }
                        else if (analysis.OstazType == "no")
                        {
                            @localizer["Without"]
                        }
                    </td>
                    <td>
                        @if (analysis.LastLevel == 1)
                        {
                            @localizer["Yes"]
                        }
                        else if (analysis.LastLevel == 0)
                        {
                            @localizer["No"]
                        }
                    </td>

                    <td width="30%" class="text-center">
                        <a asp-controller="AccMainCode" asp-action="EditMainLevel_5" asp-route-ID="@analysis.MainCode" class="btn btn-sm btn-success mb-1 fs-6" style="width:150px;">
                            <i class="bi bi-pencil"></i> @localizer["Edit"]
                        </a>
                        <form asp-action="DeleteMainLevel_5" method="post" class="d-inline">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@analysis.MainCode" />
                            <button type="button" onclick="openModalListener(event)" class="btn btn-sm btn-danger mb-1  fs-6" data-modal-target style="width:150px;">@localizer["Delete"]</button>
                            <div class="modal-container">
                                <div class="modal 4" id="modal">
                                    <div class="modal-header fs-4">
                                        <div class="title">@localizer["Confirm Delete"]</div>
                                        <button type="button" onclick="closeModelListener(event)" data-close-button class="close-button">&times;</button>
                                    </div>
                                    <div class="modal-body fs-4">
                                        @localizer["Are you sure you want to delete this item ?"]
                                    </div>
                                    <div class="modal-footer fs-4">
                                        <button type="button" onclick="closeModelListener(event)" data-close-button class="btn btn-secondary">@localizer["No"]</button>
                                        <button class="btn btn-danger">@localizer["Yes"]</button>
                                    </div>
                                </div>
                                <div onclick="overlayListener(event)" id="overlay"></div>
                            </div>
                        </form>
                    </td>

                </tr>
            }
        </tbody>
    </table>
</div>
